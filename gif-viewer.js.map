{"version":3,"sources":["gif-viewer.es6"],"names":[],"mappings":";;;;;;IAAM,SAAS;AAED,WAFR,SAAS,GAEE;0BAFX,SAAS;;AAGX,QAAI,CAAC,GAAG,GAAG;AACT,SAAG,EAAe,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC;AAChD,YAAM,EAAY,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;AACnD,cAAQ,EAAU,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC;AACrD,mBAAa,EAAK,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC;AAC1D,WAAK,EAAa,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC;AAClD,gBAAU,EAAQ,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC;AACvD,iBAAW,EAAO,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC;AACxD,cAAQ,EAAU,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC;AACrD,UAAI,EAAc,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC;AACjD,UAAI,EAAc,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC;AACjD,aAAO,EAAW,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC;KACrD,CAAA;AACD,QAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAC5C,QAAI,CAAC,UAAU,EAAE,CAAC;AAClB,QAAI,CAAC,MAAM,EAAE,CAAC;;AAEd,QAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAC;AACjC,UAAI,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACxC,UAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC;AACpB,YAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACnD,YAAI,CAAC,OAAO,EAAE,CAAC;OAChB;KACF;GACF;;eA3BG,SAAS;;WA6BH,sBAAG;AACX,UAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,UAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,UAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AACrB,UAAI,CAAC,aAAa,GAAG,CAAC,CAAC;KACxB;;;;;WAGM,kBAAG;;;;AAER,cAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,UAAC,CAAC,EAAI;AAC/B,eAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AACvB,YAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,YAAY,CAAC,EAAC;AAC1C,WAAC,CAAC,cAAc,EAAE,CAAC;SACpB;AACD,gBAAO,CAAC,CAAC,OAAO;AACd,eAAK,EAAE;AAAE,kBAAK,SAAS,EAAE,CAAC,AAAC,MAAM;AAAA,AACjC,eAAK,GAAG;AAAE,kBAAK,SAAS,EAAE,CAAC,AAAC,MAAM;AAAA,AAClC,eAAK,GAAG;AAAE,kBAAK,SAAS,EAAE,CAAC,AAAC,MAAM;AAAA,AAClC,eAAK,EAAE;AAAE,kBAAK,GAAG,CAAC,WAAW,CAAC,OAAO,GAAG,MAAK,GAAG,CAAC,WAAW,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,MAAK,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,AAAC,MAAM;AACzJ,kBAAM;AAAA,SACP;OACF,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,GAAG,UAAC,CAAC,EAAI;AACjC,SAAC,CAAC,cAAc,EAAE,CAAC;AACnB,cAAK,OAAO,EAAE,CAAC;OAChB,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,GAAG,YAAM;AAClC,cAAK,SAAS,EAAE,CAAC;OAClB,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,YAAM;AAC5B,cAAK,KAAK,EAAE,CAAC;AACb,YAAI,QAAQ,GAAG,MAAK,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AACtD,cAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;OACvB,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,GAAG,YAAM;AAChC,cAAK,KAAK,EAAE,CAAC;AACb,cAAK,SAAS,CAAC,MAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;OACzC,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,aAAa,CAAC,OAAO,GAAG,YAAM;AACrC,cAAK,aAAa,GAAG,MAAK,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC;AAClD,YAAG,MAAK,MAAM,IAAI,SAAS,EAAC;AAC1B,gBAAK,KAAK,EAAE,CAAC;AACb,gBAAK,IAAI,EAAE,CAAC;SACb;OACF,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,GAAG,UAAC,CAAC,EAAK;AACnC,cAAK,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,MAAK,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AAChD,cAAK,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,MAAK,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC;AAC/C,cAAK,SAAS,EAAE,CAAC;OAClB,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,GAAG,YAAM;AAC9B,YAAG,MAAK,MAAM,IAAI,SAAS,EAAC;AAC1B,gBAAK,SAAS,EAAE,CAAC;SAClB;OACF,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,MAAM,CAAC,YAAY,GAAG,YAAM;AACnC,cAAK,WAAW,GAAG,IAAI,CAAC;OACzB,CAAA;;AAED,UAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,YAAM;AACjC,cAAK,WAAW,GAAG,KAAK,CAAC;AACzB,cAAK,SAAS,EAAE,CAAC;OAClB,CAAA;KACF;;;;;WAGM,mBAAE;;;AACP,UAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;AAC7B,UAAG,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAC;AACrB,WAAG,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC,CAAA;OACxC;AACD,UAAG,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,EAAC;AACtB,YAAG,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAC;AACtB,aAAG,GAAG,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,CAAC,CAAA;AAC5C,aAAG,GAAG,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAA;AACjC,aAAG,IAAI,OAAO,CAAA;SACf;AACD,WAAG,8BAA4B,GAAG,AAAE,CAAA;OACrC;AACD,SAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AAC3B,UAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;AAC7B,UAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACvC,UAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACvC,UAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACzC,UAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;AAC/B,SAAG,CAAC,YAAY,GAAG,MAAM,CAAC;AAC1B,SAAG,CAAC,WAAW,GAAG,WAAW,CAAA;AAC7B,SAAG,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC3B,SAAG,CAAC,MAAM,GAAG,UAAC,CAAC,EAAK;AAClB,eAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,YAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;AACrB,iBAAK,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACvD,eAAI,IAAI,OAAO,IAAI,OAAK,GAAG,EAAC;AAC1B,mBAAK,GAAG,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;WACxD;AACD,iBAAK,cAAc,EAAE,CAAC;SACvB,MAAM;AACL,iBAAO,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;SACzB;OACF,CAAA;AACD,SAAG,CAAC,OAAO,GAAG,UAAS,CAAC,EAAC;AACvB,eAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;OAChB,CAAA;AACD,SAAG,CAAC,IAAI,EAAE,CAAC;KACZ;;;WAEY,sBAAC,MAAM,EAAE;AACpB,UAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,cAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;KAClC;;;;;WAGS,qBAAG;AACX,UAAG,IAAI,CAAC,MAAM,IAAI,SAAS,EAAC;AAC1B,YAAI,CAAC,KAAK,EAAE,CAAC;OACd,MACI,IAAG,IAAI,CAAC,MAAM,IAAI,QAAQ,EAAC;AAC9B,YAAI,CAAC,IAAI,EAAE,CAAC;OACb;KACF;;;;;WAGK,iBAAG;AACP,UAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AAC5B,YAAM,CAAC,aAAa,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;AAC3C,UAAI,CAAC,GAAG,CAAC,UAAU,CAAC,SAAS,GAAG,MAAM,CAAC;KACxC;;;;;WAGI,gBAAG;;;AACN,UAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;AAC7B,UAAI,CAAC,GAAG,CAAC,UAAU,CAAC,SAAS,GAAG,OAAO,CAAC;AACxC,UAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAC;AAClD,YAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;OAC7B;AACD,YAAM,CAAC,aAAa,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;AAC3C,YAAM,CAAC,aAAa,GAAG,MAAM,CAAC,WAAW,CAAE,YAAK;AAC9C,eAAK,SAAS,CAAC,OAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACxC,eAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;AAC1B,YAAG,OAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,IAAI,OAAK,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAC;AAClD,cAAG,OAAK,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC;AACvB,mBAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;WAC7B,MAAM;AACL,mBAAK,KAAK,EAAE,CAAC;WACd;SACF;OACF,EAAG,EAAE,GAAG,IAAI,CAAC,aAAa,CAAG,CAAC;KAChC;;;;;WAGS,qBAAG;AACX,UAAI,CAAC,KAAK,EAAE,CAAC;AACb,UAAI,CAAC,WAAW,EAAE,CAAC;AACnB,UAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAC;AACxC,YAAI,CAAC,WAAW,GAAG,CAAC,CAAC;OACtB;AACD,UAAI,CAAC,SAAS,EAAE,CAAC;KAClB;;;WAES,qBAAG;AACX,UAAI,CAAC,KAAK,EAAE,CAAC;AACb,UAAI,CAAC,WAAW,EAAE,CAAC;AACnB,UAAG,IAAI,CAAC,WAAW,GAAG,CAAC,EAAC;AACtB,YAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;OACvC;AACD,UAAI,CAAC,SAAS,EAAE,CAAC;KAClB;;;;;WAGU,sBAAG;AACZ,UAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,EAAC;AAC9B,YAAI,CAAC,GAAG,CAAC,SAAS,GAAG,iBAAiB,CAAC;AACvC,YAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAC5D,YAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;OAC5D;KACF;;;;;WAGS,qBAAuB;UAAtB,CAAC,yDAAG,IAAI,CAAC,WAAW;;AAC7B,UAAG,IAAI,CAAC,MAAM,IAAI,SAAS,EAAC;AAC1B,YAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACxE,YAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AAC1B,YAAI,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAC/E,YAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AACrB,YAAG,IAAI,CAAC,WAAW,EAAC;AAClB,cAAI,CAAC,UAAU,EAAE,CAAC;SACnB;OACF;KACF;;;;;WAGa,uBAAC,WAAW,EAAE;;;AAC1B,UAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;AAC3B,UAAI,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAC/E,UAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AACtD,UAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAC;AAC7D,YAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;OAC5B;AACD,UAAG,WAAW,EAAC;AACb,cAAM,CAAC,aAAa,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;AAC5C,YAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACvB,YAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;AAC/B,YAAI,CAAC,cAAc,EAAE,CAAC;OACvB,MACI,IAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,EAAC;AAClE,cAAM,CAAC,aAAa,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;AAC5C,cAAM,CAAC,UAAU,CAAC;iBAAI,OAAK,aAAa,CAAC,IAAI,CAAC;SAAA,EAAE,EAAE,CAAC,CAAC;OACrD;KACF;;;;;WAGc,0BAAG;;;AAChB,UAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACvB,UAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;AAC/B,UAAI,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,GAAG,CAAC,CAAC;AAChC,UAAI,CAAC,GAAG,CAAC,KAAK,CAAC,gBAAgB,GAAG,YAAM;AACtC,eAAK,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,OAAK,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC;AACnD,eAAK,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,OAAK,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC;AACrD,eAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAM,OAAK,GAAG,CAAC,MAAM,CAAC,KAAK,OAAI,CAAC;AAC7D,eAAK,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACxC,eAAK,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACtC,cAAM,CAAC,cAAc,GAAG,MAAM,CAAC,WAAW,CAAE;iBAAK,OAAK,aAAa,EAAE;SAAA,EAAE,EAAE,CAAC,CAAC;AAC3E,eAAK,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AACtB,eAAK,GAAG,CAAC,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC;OACxC,CAAA;KACF;;;;;WAGc,0BAAG;AAChB,WAAI,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAC;AACvB,YAAI,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;AACxB,aAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC3B,YAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACzB;AACD,UAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;AAC/C,WAAI,IAAI,OAAO,IAAI,IAAI,CAAC,GAAG,EAAC;AAC1B,YAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;OAC/C;AACD,UAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACxC,UAAI,CAAC,KAAK,EAAE,CAAC;AACb,UAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAClB,UAAI,CAAC,IAAI,EAAE,CAAC;KACb;;;SAxRG,SAAS","file":"gif-viewer.js","sourcesContent":["class GifViewer {\r\n\r\n  constructor () {\r\n    this.dom = {\r\n      url:              document.getElementById('url'),\r\n      canvas:           document.getElementById('canvas'),\r\n      progress:         document.getElementById('progress'),\r\n      playback_rate:    document.getElementById('playback_rate'),\r\n      video:            document.getElementById('video'),\r\n      play_pause:       document.getElementById('play_pause'),\r\n      draw_cursor:      document.getElementById('draw_cursor'),\r\n      load_gif:         document.getElementById('load_gif'),\r\n      loop:             document.getElementById('loop'),\r\n      save:             document.getElementById('save'),\r\n      overlay:          document.getElementById('overlay')\r\n    }\r\n    this.ctx = this.dom.canvas.getContext('2d');\r\n    this.initialize();\r\n    this.listen();\r\n    // load if url is specified in anchor\r\n    if(window.location.hash.length > 1){\r\n      let url = window.location.hash.slice(1);\r\n      if(url.match(/http/i)){\r\n        this.dom.url.value = window.location.hash.slice(1);\r\n        this.loadGif();\r\n      }\r\n    }\r\n  }\r\n\r\n  initialize() {\r\n    this.frames = [];\r\n    this.images = [];\r\n    this.frame_index = 0;\r\n    this.playback_rate = 1;\r\n  }\r\n\r\n  // listen for events\r\n  listen () {\r\n    //keyboard inputs\r\n    document.body.onkeypress = (e)=> {\r\n      console.log(e.keyCode);\r\n      if(e.keyCode.toString().match(/32|106|107/)){\r\n        e.preventDefault();\r\n      }\r\n      switch(e.keyCode){\r\n        case 32: this.playPause(); break;\r\n        case 106: this.nextFrame(); break;\r\n        case 107: this.prevFrame(); break;\r\n        case 99: this.dom.draw_cursor.checked ? this.dom.draw_cursor.removeAttribute('checked') : this.dom.draw_cursor.setAttribute('checked', 'checked'); break;\r\n        break;\r\n      }\r\n    }\r\n    // load gif on url change\r\n    this.dom.load_gif.onsubmit = (e)=> {\r\n      e.preventDefault();\r\n      this.loadGif();\r\n    }\r\n    // play/pause toggle clicked\r\n    this.dom.play_pause.onclick = () => {\r\n      this.playPause();\r\n    }\r\n    // save on save button click\r\n    this.dom.save.onclick = () => {\r\n      this.pause();\r\n      let data_url = this.dom.canvas.toDataURL('image/png');\r\n      window.open(data_url);\r\n    }\r\n    // update this.dom.canvas on progress input change\r\n    this.dom.progress.oninput = () => {\r\n      this.pause();\r\n      this.drawFrame(this.dom.progress.value);\r\n    }\r\n    // update playback rate on playback_rate input change\r\n    this.dom.playback_rate.oninput = () => {\r\n      this.playback_rate = this.dom.playback_rate.value;\r\n      if(this.status == 'playing'){\r\n        this.pause();\r\n        this.play();\r\n      }\r\n    }\r\n    // move cursor when hovering over this.dom.canvas\r\n    this.dom.canvas.onmousemove = (e) => {\r\n      this.x = e.clientX - this.dom.canvas.offsetLeft;\r\n      this.y = e.clientY - this.dom.canvas.offsetTop;\r\n      this.drawFrame();\r\n    }\r\n    // play/pause on this.dom.canvas click\r\n    this.dom.canvas.onclick = () => {\r\n      if(this.status != 'loading'){\r\n        this.playPause();\r\n      }\r\n    }\r\n    // draw cursor when this.dom.canvas is hovered\r\n    this.dom.canvas.onmouseenter = () => {\r\n      this.draw_cursor = true;\r\n    }\r\n    // remove cursor when this.dom.canvas is not hovered\r\n    this.dom.canvas.onmouseout = () => {\r\n      this.draw_cursor = false;\r\n      this.drawFrame();\r\n    }\r\n  }\r\n\r\n  // load gif\r\n  loadGif(){\r\n    let src = this.dom.url.value;\r\n    if(src.match(/imgur/i)){\r\n      src = src.replace(/gif$|gifv$/, 'webm')\r\n    }\r\n    if(src.match(/gfycat/i)){\r\n      if(!src.match(/zippy/i)){\r\n        src = src.replace(/gfycat/i, 'zippy.gfycat')\r\n        src = src.replace(/\\.webm$/i, '')\r\n        src += '.webm'\r\n      }\r\n      src = `http://crossorigin.me/${src}`\r\n    }\r\n    src = src.replace('#', '');\r\n    this.changeStatus('loading');\r\n    this.dom.video.style.display = 'block';\r\n    this.dom.canvas.style.display = 'none';\r\n    this.dom.overlay.style.display = 'block';\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.responseType = 'blob';\r\n    xhr.crossOrigin = 'Anonymous'\r\n    xhr.open('GET', src, true);\r\n    xhr.onload = (e) => {\r\n      console.log(e);\r\n      if (xhr.status == 200) {\r\n        this.dom.video.src = URL.createObjectURL(xhr.response);\r\n        for(var element in this.dom){\r\n          this.dom[element].setAttribute('disabled', 'disabled');\r\n        }\r\n        this.generateFrames();\r\n      } else {\r\n        console.log(xhr.status);\r\n      }\r\n    }\r\n    xhr.onerror = function(e){\r\n      console.log(e);\r\n    }\r\n    xhr.send();\r\n  }\r\n\r\n  changeStatus (status) {\r\n    this.status = status;\r\n    document.body.className = status;\r\n  }\r\n\r\n  // play or pause depending on status\r\n  playPause () {\r\n    if(this.status == 'playing'){\r\n      this.pause();\r\n    }\r\n    else if(this.status == 'paused'){\r\n      this.play();\r\n    }\r\n  }\r\n\r\n  // pause gif\r\n  pause () {\r\n    this.changeStatus('paused');\r\n    window.clearInterval(window.play_interval);\r\n    this.dom.play_pause.innerHTML = 'play';\r\n  }\r\n\r\n  // play gif\r\n  play () {\r\n    this.changeStatus('playing');\r\n    this.dom.play_pause.innerHTML = 'pause';\r\n    if(this.dom.progress.value == this.dom.progress.max){\r\n      this.dom.progress.value = 0;\r\n    }\r\n    window.clearInterval(window.play_interval);\r\n    window.play_interval = window.setInterval( ()=> {\r\n      this.drawFrame(this.dom.progress.value);\r\n      this.dom.progress.value++;\r\n      if(this.dom.progress.value == this.dom.progress.max){\r\n        if(this.dom.loop.checked){\r\n          this.dom.progress.value = 0;\r\n        } else {\r\n          this.pause();\r\n        }\r\n      }\r\n    }, (60 / this.playback_rate) );\r\n  }\r\n\r\n  // next frame\r\n  nextFrame () {\r\n    this.pause();\r\n    this.frame_index++;\r\n    if(this.frame_index == this.images.length){\r\n      this.frame_index = 0;\r\n    }\r\n    this.drawFrame();\r\n  }\r\n\r\n  prevFrame () {\r\n    this.pause();\r\n    this.frame_index--;\r\n    if(this.frame_index < 0){\r\n      this.frame_index = this.images.length;\r\n    }\r\n    this.drawFrame();\r\n  }\r\n\r\n  // draw cursor\r\n  drawCursor () {\r\n    if(this.dom.draw_cursor.checked){\r\n      this.ctx.fillStyle = 'rgba(0,0,0,0.5)';\r\n      this.ctx.fillRect(this.x - 1, 0, 1, this.dom.canvas.height);\r\n      this.ctx.fillRect(0, this.y - 1, this.dom.canvas.width, 1);\r\n    }\r\n  }\r\n\r\n  // draw frame\r\n  drawFrame (i = this.frame_index) {\r\n    if(this.status != 'loading'){\r\n      this.ctx.clearRect(0, 0, this.dom.canvas.width, this.dom.canvas.height);\r\n      let image = this.images[i]\r\n      this.ctx.drawImage(image, 0, 0, this.dom.canvas.width, this.dom.canvas.height);\r\n      this.frame_index = i;\r\n      if(this.draw_cursor){\r\n        this.drawCursor();\r\n      }\r\n    }\r\n  }\r\n\r\n  // get individual frame from this.dom.video\r\n  generateFrame (final_frame) {\r\n    let video = this.dom.video;\r\n    this.ctx.drawImage(video, 0, 0, this.dom.canvas.width, this.dom.canvas.height);\r\n    let data_url = this.dom.canvas.toDataURL('image/png');\r\n    if(this.frames.length < 1 || this.frames.indexOf(data_url) < 0){\r\n      this.frames.push(data_url);\r\n    }\r\n    if(final_frame){\r\n      window.clearInterval(window.frame_interval);\r\n      this.dom.video.pause();\r\n      this.dom.video.currentTime = 0;\r\n      this.generateImages();\r\n    }\r\n    else if(this.dom.video.currentTime / this.dom.video.duration > 0.99){\r\n      window.clearInterval(window.frame_interval);\r\n      window.setTimeout(()=>this.generateFrame(true), 10);\r\n    }\r\n  }\r\n\r\n  // generate frames from this.dom.video\r\n  generateFrames () {\r\n    this.dom.video.pause();\r\n    this.dom.video.currentTime = 0;\r\n    this.dom.video.playbackRate = 2;\r\n    this.dom.video.oncanplaythrough = () => {\r\n      this.dom.canvas.width = this.dom.video.offsetWidth;\r\n      this.dom.canvas.height = this.dom.video.offsetHeight;\r\n      this.dom.progress.style.width = `${this.dom.canvas.width}px`;\r\n      this.dom.canvas.style.display = 'block';\r\n      this.dom.video.style.display = 'none';\r\n      window.frame_interval = window.setInterval( ()=> this.generateFrame(), 30);\r\n      this.dom.video.play();\r\n      this.dom.video.oncanplaythrough = null;\r\n    }\r\n  }\r\n\r\n  // generate images from frames\r\n  generateImages () {\r\n    for(let i in this.frames){\r\n      let image = new Image();\r\n      image.src = this.frames[i];\r\n      this.images.push(image);\r\n    }\r\n    this.dom.progress.max = this.images.length - 1;\r\n    for(let element in this.dom){\r\n      this.dom[element].removeAttribute('disabled');\r\n    }\r\n    this.dom.overlay.style.display = 'none';\r\n    this.pause();\r\n    this.drawFrame(0);\r\n    this.play();\r\n  }\r\n\r\n}\r\n"]}